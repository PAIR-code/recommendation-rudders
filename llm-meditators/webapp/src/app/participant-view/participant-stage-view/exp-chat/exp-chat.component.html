<div class="chat-members"> 
  <b>Other chat members </b>
  <div class="container">
    @for (user of this.otherParticipants(); track user.userId) {
      <div class="profile">
        <img class="avatar" src={{user.profile.avatarUrl}} >
        <div class="name">
          {{user.profile.name}}
        </div>
        <div class="pronoun">
          ({{ user.profile.pronouns }})
        </div>
      </div>
    }
  </div>
</div>


<div class="discussion"> 
  <b>Discussion</b> 

  <div class="messages">
    @for (message of messages(); track $index) {
      <div class="message">
        @if (message.messageType === 'userMessage') {
          <app-chat-user-message [message]="message"></app-chat-user-message>
        } @else if (message.messageType === 'mediatorMessage') {
          <app-chat-mediator-message [message]="message"></app-chat-mediator-message>
        } @else if (message.messageType === 'discussItemsMessage') {
          <app-chat-discuss-items-message></app-chat-discuss-items-message>
        } @else {
          <div></div>
        }
      </div>
    }
  </div>

  <div class="message-form">
    <app-chat-user-profile [profile]="participant.userData().profile"></app-chat-user-profile>
    <mat-form-field class="full-width">
      <mat-label>Message to send</mat-label>
      <input matInput placeholder="Write your message" [(ngModel)]="message" 
      [disabled]="this.stageData().finishedChatting === true" />
    </mat-form-field>
    <button color="primary" mat-button (click)="sendMessage()" 
    [disabled]="this.stageData().finishedChatting === true">
      <!-- <mat-icon>redo</mat-icon> -->
      <span>Send</span>
    </button>
  </div>

  <div>
    <mat-slide-toggle 
      [checked]="this.stageData().finishedChatting === true"
      [disabled]="this.stageData().isSilent === true"
      (change)="updateToogleValue($event)"
    >
    I'm done with chatting and ready to move on
    </mat-slide-toggle>
  </div>
</div>

